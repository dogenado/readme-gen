<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>README Generator</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background: #0a0a0a;
            color: #e0e0e0;
            margin: 0;
            padding: 20px;
        }
        .container {
            display: flex;
            gap: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        .input-section {
            flex: 1;
            max-width: 500px;
        }
        .output-section {
            flex: 1;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            color: #ccc;
        }
        input, select, textarea {
            width: 100%;
            padding: 8px;
            background: #222;
            border: 1px solid #444;
            color: #fff;
            font-family: 'Courier New', monospace;
        }
        button {
            padding: 8px 15px;
            background: #333;
            color: #fff;
            border: 1px solid #555;
            cursor: pointer;
            margin-right: 10px;
        }
        button:hover {
            background: #444;
        }
        .section {
            margin-bottom: 20px;
        }
        #readmeOutput {
            background: #111;
            color: #fff;
            padding: 15px;
            border: 1px solid #333;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.2;
            white-space: pre;
            overflow-x: auto;
            height: 80vh;
            overflow-y: auto;
        }
        .item {
            display: flex;
            gap: 10px;
            margin-bottom: 5px;
        }
        .item input {
            flex: 1;
        }
        .loading-status {
            color: #999;
            font-size: 0.9em;
            margin-bottom: 10px;
        }
        .error-message {
            color: #ff6666;
            font-size: 0.9em;
            margin-bottom: 10px;
        }
        .success-message {
            color: #66ff66;
            font-size: 0.9em;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="input-section">
            <h1>README Generator</h1>
            
            <div class="section">
                <div class="form-group">
                    <label for="asciiArt">ASCII Art:</label>
                    <div id="asciiArtStatus" class="loading-status">Loading ASCII art files...</div>
                    <select id="asciiArt">
                        <option value="">Loading...</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="title">Title:</label>
                    <input type="text" id="title" placeholder="Enter project title">
                </div>

                <div class="form-group">
                    <label for="description">Description:</label>
                    <textarea id="description" placeholder="Enter project description" rows="3"></textarea>
                </div>

                <div class="form-group">
                    <label for="version">Version:</label>
                    <input type="text" id="version" placeholder="1.0.0">
                </div>

                <div class="form-group">
                    <label>Change Log:</label>
                    <div id="changeLog">
                        <div class="item">
                            <input type="text" class="change-log-input" placeholder="Change log entry">
                            <button onclick="removeItem(this)">Remove</button>
                        </div>
                    </div>
                    <button onclick="addChangeLog()">Add Entry</button>
                </div>

                <div class="form-group">
                    <label>Release Notes:</label>
                    <div id="releaseNotes">
                        <div class="item">
                            <input type="text" class="release-note-input" placeholder="Release note">
                            <button onclick="removeItem(this)">Remove</button>
                        </div>
                    </div>
                    <button onclick="addReleaseNote()">Add Note</button>
                </div>

                <div class="form-group">
                    <label>Hardware:</label>
                    <div id="hardware">
                        <div class="item">
                            <input type="text" class="hardware-item" placeholder="Hardware component or specifications">
                            <button onclick="removeItem(this)">Remove</button>
                        </div>
                    </div>
                    <button onclick="addHardware()">Add Hardware</button>
                </div>

                <div class="form-group">
                    <label>Credits:</label>
                    <div id="developers">
                        <div class="item">
                            <input type="text" class="developer-name" placeholder="Developer name" value="dogenado">
                            <button onclick="removeItem(this)">Remove</button>
                        </div>
                    </div>
                    <button onclick="addDeveloper()">Add Developer</button>
                </div>

                <div class="form-group">
                    <label for="additionalThanks">Additional Thanks:</label>
                    <textarea id="additionalThanks" placeholder="Enter additional thanks" rows="3"></textarea>
                </div>

                <button onclick="generateReadme()">Generate README</button>
                <button onclick="copyToClipboard()">Copy to Clipboard</button>
            </div>
        </div>

        <div class="output-section">
            <h2>Generated README</h2>
            <div id="readmeOutput"></div>
        </div>
    </div>

    <script>
        // ASCII art storage
        var asciiArtCache = {};
        var currentAsciiArt = '';
        var currentAsciiArtName = '';

        // Initialize the app
        function initApp() {
            loadAsciiArtFiles();
        }

        // Load ASCII art files dynamically
        function loadAsciiArtFiles() {
            var statusDiv = document.getElementById('asciiArtStatus');
            var select = document.getElementById('asciiArt');
            
            statusDiv.textContent = 'Loading ASCII art files...';
            
            // First try to load from the index file
            fetch('ascii/art-index.json')
                .then(function(response) {
                    if (!response.ok) {
                        throw new Error('Could not load art index file');
                    }
                    return response.json();
                })
                .then(function(files) {
                    statusDiv.textContent = 'Found ' + files.length + ' ASCII art files. Loading content...';
                    return Promise.all(files.map(function(file) {
                        return loadAsciiArtFile(file);
                    }));
                })
                .then(function() {
                    populateAsciiDropdown();
                    setupEventListeners();
                    generateReadme();
                    statusDiv.textContent = 'ASCII art loaded successfully!';
                    setTimeout(function() {
                        statusDiv.textContent = '';
                    }, 2000);
                })
                .catch(function(error) {
                    statusDiv.className = 'error-message';
                    
                    // Check if this is likely a CORS/local file issue
                    if (error.message.includes('fetch') || error.message.includes('NetworkError')) {
                        statusDiv.textContent = 'Network error loading files. This happens when opening files directly. Please use a local server or deploy to GitHub Pages.';
                    } else {
                        statusDiv.textContent = 'Error loading ASCII art: ' + error.message + '. Please make sure the files exist in the ascii directory.';
                    }
                    console.error('Error loading ASCII art:', error);
                    
                    // Fallback to embedded example art for testing
                    loadFallbackArt();
                });
        }

        // Fallback art for testing when files can't be loaded
        function loadFallbackArt() {
            var statusDiv = document.getElementById('asciiArtStatus');
            statusDiv.className = 'success-message';
            statusDiv.textContent = 'Loading fallback ASCII art for demo purposes...';
            
            asciiArtCache = {
                'Demo ASCII Art': '   ###    ###   ######   #######   ######   #######  \n  ## ##   ## ##  ##   ##  ##     ## ##   ##  ##     ## \n ##   ## ##   ## ##   ##  ##     ## ##    ## ##     ## \n##     ## ##     ## ######   ##     ## ##       ##     ## \n######### ######### ##   ##  ##     ## ##       ######### \n##     ## ##     ## ##   ##  ##     ## ##    ## ##     ## \n##     ## ##     ## ##   ##  ##     ## ##   ##  ##     ## \n##     ## ##     ## ######    #######   ######    #######  '
            };
            
            populateAsciiDropdown();
            setupEventListeners();
            generateReadme();
            
            statusDiv.textContent = 'Demo mode loaded. Add ASCII art files to ascii/ directory for full functionality.';
        }

        // Load individual ASCII art file
        function loadAsciiArtFile(filename) {
            return fetch('ascii/' + filename)
                .then(function(response) {
                    if (!response.ok) {
                        throw new Error('Could not load file: ' + filename);
                    }
                    return response.text();
                })
                .then(function(content) {
                    // Normalize line endings and remove trailing spaces
                    content = content.replace(/\r\n/g, '\n').replace(/\r/g, '\n');
                    content = content.replace(/[ \t]+$/gm, '');
                    
                    var name = filename.replace('.txt', '').replace(/-/g, ' ').replace(/_/g, ' ');
                    asciiArtCache[name] = content;
                    console.log('Loaded ASCII art:', name, 'with', content.split('\n').length, 'lines');
                    return name;
                });
        }

        // Populate ASCII art dropdown
        function populateAsciiDropdown() {
            var select = document.getElementById('asciiArt');
            select.innerHTML = '';
            
            var options = Object.keys(asciiArtCache);
            options.sort();
            
            // Move "ascii dogenado" to the front if it exists
            var dogenadoIndex = options.indexOf('ascii dogenado');
            if (dogenadoIndex > -1) {
                var dogenado = options.splice(dogenadoIndex, 1)[0];
                options.unshift(dogenado);
            }
            
            for (var i = 0; i < options.length; i++) {
                var option = document.createElement('option');
                option.value = options[i];
                option.textContent = options[i];
                select.appendChild(option);
            }
            
            if (options.length > 0) {
                select.value = options[0];
                currentAsciiArtName = options[0];
                currentAsciiArt = asciiArtCache[options[0]];
            }
        }

        // Set up event listeners
        function setupEventListeners() {
            // ASCII art change
            var asciiSelect = document.getElementById('asciiArt');
            if (asciiSelect) {
                asciiSelect.addEventListener('change', function() {
                    currentAsciiArtName = this.value;
                    currentAsciiArt = asciiArtCache[this.value];
                    console.log('Selected ASCII art:', currentAsciiArtName);
                    generateReadme();
                });
            }

            // Auto-generate on input change
            var inputs = ['title', 'description', 'version', 'additionalThanks'];
            for (var i = 0; i < inputs.length; i++) {
                var element = document.getElementById(inputs[i]);
                if (element) {
                    element.addEventListener('input', generateReadme);
                }
            }
        }

        function addChangeLog() {
            var container = document.getElementById('changeLog');
            var div = document.createElement('div');
            div.className = 'item';
            div.innerHTML = '<input type="text" class="change-log-input" placeholder="Change log entry"><button onclick="removeItem(this)">Remove</button>';
            container.appendChild(div);
            
            // Add event listener to new input
            var inputs = div.getElementsByTagName('input');
            if (inputs.length > 0) {
                inputs[0].addEventListener('input', generateReadme);
            }
        }

        function addReleaseNote() {
            var container = document.getElementById('releaseNotes');
            var div = document.createElement('div');
            div.className = 'item';
            div.innerHTML = '<input type="text" class="release-note-input" placeholder="Release note"><button onclick="removeItem(this)">Remove</button>';
            container.appendChild(div);
            
            // Add event listener to new input
            var inputs = div.getElementsByTagName('input');
            if (inputs.length > 0) {
                inputs[0].addEventListener('input', generateReadme);
            }
        }

        function addDeveloper() {
            var container = document.getElementById('developers');
            var div = document.createElement('div');
            div.className = 'item';
            div.innerHTML = '<input type="text" class="developer-name" placeholder="Developer name"><button onclick="removeItem(this)">Remove</button>';
            container.appendChild(div);
            
            // Add event listener to new input
            var inputs = div.getElementsByTagName('input');
            if (inputs.length > 0) {
                inputs[0].addEventListener('input', generateReadme);
            }
        }

        function addHardware() {
            var container = document.getElementById('hardware');
            var div = document.createElement('div');
            div.className = 'item';
            div.innerHTML = '<input type="text" class="hardware-item" placeholder="Hardware component or specifications"><button onclick="removeItem(this)">Remove</button>';
            container.appendChild(div);
            
            // Add event listener to new input
            var inputs = div.getElementsByTagName('input');
            if (inputs.length > 0) {
                inputs[0].addEventListener('input', generateReadme);
            }
        }

        function removeItem(button) {
            var parent = button.parentElement;
            var container = parent.parentElement;
            if (container.children.length > 1) {
                parent.remove();
                generateReadme();
            }
        }

        function createBorderBox(content) {
            var lines = content.split('\n');
            var maxLength = 0;
            for (var i = 0; i < lines.length; i++) {
                if (lines[i].length > maxLength) {
                    maxLength = lines[i].length;
                }
            }
            var border = '+' + '-'.repeat(maxLength + 2) + '+';
            var result = border + '\n';
            for (var i = 0; i < lines.length; i++) {
                result += '| ' + lines[i].padEnd(maxLength) + ' |\n';
            }
            result += border;
            return result;
        }

        function generateReadme() {
            if (!currentAsciiArt) return;
            
            var title = document.getElementById('title').value || 'Project Title';
            var description = document.getElementById('description').value || 'Project description goes here.';
            var version = document.getElementById('version').value || '1.0.0';
            var additionalThanks = document.getElementById('additionalThanks').value;

            // Get change log entries
            var changeLogEntries = [];
            var changeInputs = document.getElementsByClassName('change-log-input');
            for (var i = 0; i < changeInputs.length; i++) {
                if (changeInputs[i].value.trim()) {
                    changeLogEntries.push('• ' + changeInputs[i].value.trim());
                }
            }

            // Get release notes
            var releaseNotes = [];
            var noteInputs = document.getElementsByClassName('release-note-input');
            for (var i = 0; i < noteInputs.length; i++) {
                if (noteInputs[i].value.trim()) {
                    releaseNotes.push('• ' + noteInputs[i].value.trim());
                }
            }

            // Get developers
            var developers = [];
            var devInputs = document.getElementsByClassName('developer-name');
            for (var i = 0; i < devInputs.length; i++) {
                if (devInputs[i].value.trim()) {
                    developers.push(devInputs[i].value.trim());
                }
            }

            // Get hardware items
            var hardwareItems = [];
            var hardwareInputs = document.getElementsByClassName('hardware-item');
            for (var i = 0; i < hardwareInputs.length; i++) {
                if (hardwareInputs[i].value.trim()) {
                    hardwareItems.push('• ' + hardwareInputs[i].value.trim());
                }
            }

            // Build README content
            var readme = currentAsciiArt + '\n\n';

            // Main section with border
            var mainContent = 'Title: ' + title + '\nDescription: ' + description + '\nVersion: ' + version;
            readme += createBorderBox(mainContent) + '\n\n';

            // Change log section
            if (changeLogEntries.length > 0) {
                readme += '## Change Log\n\n';
                readme += changeLogEntries.join('\n') + '\n\n';
            }

            // Release notes section
            if (releaseNotes.length > 0) {
                readme += '## Release Notes\n\n';
                readme += releaseNotes.join('\n') + '\n\n';
            }

            // Hardware section
            if (hardwareItems.length > 0) {
                readme += '## Hardware\n\n';
                readme += hardwareItems.join('\n') + '\n\n';
            }

            // Credits section
            if (developers.length > 0) {
                readme += '## Credits\n\n';
                readme += developers.join('\n') + '\n\n';
            }

            // Additional thanks section
            if (additionalThanks.trim()) {
                readme += '## Additional Thanks\n\n';
                readme += additionalThanks.trim() + '\n';
            }

            // Display generated README
            var output = document.getElementById('readmeOutput');
            if (output) {
                output.textContent = readme;
            }
        }

        function copyToClipboard() {
            var output = document.getElementById('readmeOutput');
            if (output) {
                navigator.clipboard.writeText(output.textContent).then(function() {
                    alert('Copied to clipboard!');
                });
            }
        }

        // Initialize when page loads
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initApp);
        } else {
            initApp();
        }
    </script>
</body>
</html>